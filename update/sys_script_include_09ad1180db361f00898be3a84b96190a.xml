<?xml version="1.0" encoding="UTF-8"?>
<record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>public</access>
        <active>true</active>
        <api_name>x_maog_vtbb.Group</api_name>
        <client_callable>false</client_callable>
        <description/>
        <name>Group</name>
        <script><![CDATA[var Group = Class.create();
Group.prototype = (function Group_proto(s) {
	var p = {};
	var TYPE = p.type = 'Group';
	var TABLE = s.TABLE = 'sys_user_group';

	var log = s.log = x_spar2_log.Logger.getLogger(TYPE, gs.getCurrentScopeName());

	var rw = RecordWrapper.setup(p, s, TABLE, 'GM');

	p.initialize = function initialize(grOrSysId, share) {
		this.set(grOrSysId, share);
	};

	p.getApplicableBoardBuilders = function getApplicableBoardBuilders() {
		var bbgs, bbs, groupSysId = this.getSysId();
		bbgs = BoardBuilderGroup.query((function(gr) {
			gr.addQuery('group', groupSysId);
		}));
		bbs = bbgs.map(function(bbg) {
			return bbg.getBoardBuilder();
		});
		return bbs;
	};

	p.updated = function updated() {
		log.info('{0} record updated - TODO', this + '');  // TODO
	};

	p.getManager = function getManager() {
		var mgr = null;
		var mgrSysId = this.getGr().getUniqueValue();
		if (mgrSysId) {
			mgr = new User(mgrSysId);
		}
		return mgr;
	};

	p.getUsers = function getUsers(filter, includeManager) {
		var manager;
		var users = GroupMember.getUsersForGroup(this, filter);
		if (includeManager) {
			manager = this.getManager();
			users.push(manager);
		}
		return users;
	};

	s.query = rw.query;
	s.deleteMultiple = rw.deleteMultiple;

	return p;
})(Group);  // End Group_proto]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>peter.smith</sys_created_by>
        <sys_created_on>2018-06-14 22:06:47</sys_created_on>
        <sys_id>09ad1180db361f00898be3a84b96190a</sys_id>
        <sys_mod_count>80</sys_mod_count>
        <sys_name>Group</sys_name>
        <sys_package display_value="Visual Task Board Builder" source="x_maog_vtbb">ae48259bdbee9b00898be3a84b9619f7</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="Visual Task Board Builder">ae48259bdbee9b00898be3a84b9619f7</sys_scope>
        <sys_update_name>sys_script_include_09ad1180db361f00898be3a84b96190a</sys_update_name>
        <sys_updated_by>peter.smith</sys_updated_by>
        <sys_updated_on>2018-07-05 04:18:02</sys_updated_on>
    </sys_script_include>
</record_update>
